# 画面キャプチャ編集ツール - 拡張版

## 📁 ファイル構成

```
screen-capture-tool/
├── index.html                      # メインファイル（最新版・モジュール化済み）
├── README.md                       # このファイル
├── .gitignore                      # Git管理設定
├── archive/                        # 旧バージョン
│   ├── screen_capture_integrated.html
│   ├── screen_capture_v2.html
│   ├── screen_capture.py
│   ├── capture_tool_editable.html
│   ├── capture_tool_final.html
│   └── capture_tool_complete.html
├── docs/                           # ドキュメント
│   ├── MODULARIZATION_PLAN.md      # モジュール化実装計画
│   ├── codebase_analysis.md        # コードベース分析
│   ├── UIUX評価レポート.md         # UI/UX評価
│   ├── backups/                    # バックアップファイル
│   ├── modularization/             # モジュール化関連ファイル
│   └── scripts/                    # ユーティリティスクリプト
└── バージョン管理/                 # 過去バージョン（V1-V14）
```

## 🚀 使い方

1. `index.html` をブラウザで開く
2. Win+Shift+S でスクリーンショット撮影
3. 「📋 クリップボード」ボタンで貼り付け
4. 描画ツールで注釈を追加
5. 「💾 保存」ボタンで保存

## ✨ 実装機能

### 1. 📷 読み込み機能
- ✅ クリップボードから貼り付け
- ✅ ファイル選択
- ✅ 画面キャプチャ（Screen Capture API）
- ✅ トリミング機能

### 2. 🎨 描画ツール
- ✅ 選択ツール（移動・編集）
- ✅ 矩形
- ✅ 円
- ✅ 線
- ✅ 矢印（線幅に連動した頭部サイズ）
- ✅ **ポリライン（連続線）** - 右クリックで終了
- ✅ テキスト（ダブルクリックで編集）
- ✅ 強調マーカー（透明度調整可能）

### 3. 🖱️ 編集機能
- ✅ **リサイズハンドル** - 四隅ドラッグでサイズ変更
- ✅ **ダブルクリック編集** - テキストを即座に編集
- ✅ ドラッグで移動
- ✅ 右クリックメニュー（編集・複製・削除）
- ✅ 取り消し（Ctrl+Z）

### 4. ⚙️ 設定
- ✅ 8色クイック選択
- ✅ 線の太さ調整
- ✅ 文字サイズ調整
- ✅ **透明度調整（10-80%）** - 強調マーカー用

### 5. 💾 保存機能
- ✅ **ヘッダーにファイル名入力**
- ✅ **ヘッダーに保存先選択**
- ✅ PNG形式で保存
- ✅ Ctrl+S で即座に保存

### 6. 🎯 その他
- ✅ ズーム機能（50%-300%）
- ✅ ショートカットキー対応
- ✅ トースト通知

## ⌨️ ショートカットキー

| キー | 機能 |
|------|------|
| `Ctrl+V` | クリップボードから貼り付け |
| `Ctrl+S` | 保存 |
| `Ctrl+Z` | 取り消し |
| `Ctrl+D` | 選択図形を複製 |
| `Delete` | 選択図形を削除 |
| `Esc` | ポリライン描画をキャンセル |

## 📐 ポリラインの使い方

1. 「連続線」ツールを選択
2. キャンバス上でクリック連続
3. 右クリックまたはEscキーで終了

## ✂️ トリミングの使い方

1. 画像を読み込む
2. 「✂️ トリミング」ボタンをクリック
3. マウスドラッグでトリミング範囲を選択
4. 「トリミング実行」ボタンをクリック

## 🌐 対応ブラウザ

- Google Chrome（推奨）
- Microsoft Edge
- Firefox（一部機能制限あり）

## 📝 注意事項

- 画面キャプチャ機能は最新ブラウザのみ対応
- フォルダ選択機能はChrome/Edgeのみ対応
- クリップボードアクセスには権限が必要

## 🔄 更新履歴

### v4.0 (2025-10-18) - モジュール化版 ✨
- 🏗️ **コード構造の大幅改善**
  - IIFE（即時実行関数式）によるスコープ分離
  - 47個のグローバル変数をAppStateオブジェクトに集約
  - 40個の関数をグローバルAPI公開
- 🐛 **バグ修正**
  - モザイク/ぼかしのマイナス方向ドラッグ時の座標ずれを修正
- 📁 **ディレクトリ整理**
  - docsディレクトリ作成
  - バックアップファイルの整理
  - モジュール化関連ファイルの整理
- 📖 **ドキュメント充実**
  - モジュール化実装計画書作成
  - Git管理による変更履歴追跡

### v3.0 (2025-10-07)
- ✨ リサイズハンドル実装
- ✨ テキストダブルクリック編集
- ✨ 矢印の太さ修正（線幅連動）
- ✨ ポリライン（連続線）機能
- ✨ トリミング機能
- ✨ 透明度範囲修正（強調マーカー用）
- ✨ 画面キャプチャ機能
- ✨ UIレイアウト改善（保存設定をヘッダーに移動）

### v2.0
- 基本的な描画機能
- 選択・移動・編集機能
- 保存機能

### v1.0
- 初版リリース

## 🚧 今後の展望

現在のv4.0でモジュール化の第一段階（AppState実装）が完了しました。
今後の改善案については `docs/MODULARIZATION_PLAN.md` を参照してください。

### 推奨される次のステップ
1. **Vite導入** - 開発環境の近代化
2. **TypeScript化** - 型安全性の向上
3. **Web Worker活用** - モザイク/ぼかし処理の並列化
4. **テスト導入** - Vitestによるユニットテスト

詳細は [Gemini CLIによるコードレビュー結果](docs/MODULARIZATION_PLAN.md#-gemini-cliによるコードレビュー結果) を参照してください。
